<div class="normalContent">

 <div v-if="resp && resp.component">
    <component :is="resp.component" :resp="resp"></component>
 </div>
 <div v-else-if="v">
  <h4 style="margin-top: 2em" v-html="step.labels.title"></h4>

  <div v-if="step.allow_many">
    
        <div v-if="imported">
            <ImportResult :imported="imported" :ordered_fields="to_import.fields" @done="imported = to_import = undefined"></ImportResult>
        </div>
        <div v-else>
            <ImportFile @change="val => to_import = val"></ImportFile>
        </div>
</div>

<div v-if="!imported">

 <div v-if="isMember" class="alert alert-danger">
     {{v.givenName}} {{v.sn}} est {{conf.affiliation_labels[v.eduPersonPrimaryAffiliation]}}
     <span v-if="anneeInscription">
         {{anneeInscription}}/{{anneeInscription+1}}
     </span>
 </div>

  <div v-if="check_homonyms">
      <Homonyms :v="v" :id="id" @merge="merge"></Homonyms>
  </div>
               
 <form novalidate name="myForm" @submit.prevent="submit" class="form-horizontal">

   <fieldset>  
    <my-bootstrap-form-group name="Shib_Identity_Provider" label="Etablissement" v-if="v.Shib_Identity_Provider">
      <input name="Shib_Identity_Provider" :value="v.Shib_Identity_Provider | formatIdpId" type="text" disabled class="form-control">
    </my-bootstrap-form-group>
 
    <my-bootstrap-form-group name="eduPersonPrincipalName" label="Identifiant dans l'Ã©tablissement" v-if="v.eduPersonPrincipalName">
      <input name="eduPersonPrincipalName" v-model="v.eduPersonPrincipalName" type="text" disabled form-control>
    </my-bootstrap-form-group>
 
    <my-bootstrap-form-group name="mail" label="Mail" v-if="v.mail">
      <input name="mail" v-model="v.mail" type="text" disabled form-control>
    </my-bootstrap-form-group>
   </fieldset>
    
   <common-attrs v-model="v" :attrs="other_attrs" :submitted="submitted"></common-attrs>
   <extern-attrs v-model="v" :attrs="other_attrs" :submitted="submitted"></extern-attrs>
   <password-attrs v-model="v" :attrs="other_attrs" :submitted="submitted"></password-attrs>
   <barcode-attrs v-model="v" :attrs="other_attrs" :submitted="submitted" :v_orig="v_orig"></barcode-attrs>   
   
   <my-bootstrap-form-group>
      <button class="btn btn-primary" type="submit" v-if="step.labels.okButton">
        <span class="glyphicon glyphicon-plus"></span>
        <span v-html="step.labels.okButton"></span>
      </button>

      <button class="btn btn-primary" @click.prevent="reject()" v-if="step.labels.cancelButton">
        <span class="glyphicon glyphicon-trash"></span>
        <span v-html="step.labels.cancelButton"></span>
      </button>
    </my-bootstrap-form-group>

 </form>
</div>
</div>
</div>
